<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal - MedCore AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-user-shield"></i> Admin Portal - MedCore AI</h1>
            <div class="nav-links">
                <a href="/"><i class="fas fa-home"></i> Home</a>
                <a href="/patient"><i class="fas fa-user"></i> Patient</a>
                <a href="/doctor"><i class="fas fa-user-md"></i> Doctor</a>
                <a href="/pharmacy"><i class="fas fa-pills"></i> Pharmacy</a>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('dashboard')">
                <i class="fas fa-chart-line"></i> Dashboard
            </button>
            <button class="tab-btn" onclick="switchTab('users')">
                <i class="fas fa-users"></i> Manage Users
            </button>
            <button class="tab-btn" onclick="switchTab('appointments')">
                <i class="fas fa-calendar-check"></i> Appointments
            </button>
            <button class="tab-btn" onclick="switchTab('pharmacy')">
                <i class="fas fa-prescription-bottle"></i> Pharmacy
            </button>
            <button class="tab-btn" onclick="switchTab('alerts')">
                <i class="fas fa-exclamation-triangle"></i> Emergency Alerts
            </button>
            <button class="tab-btn" onclick="switchTab('analytics')">
                <i class="fas fa-chart-pie"></i> Patient Analytics
            </button>
        </div>

        <div id="dashboard" class="tab-content active">
            <div class="stats-grid" id="dashboardStats"></div>
        </div>

        <div id="users" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> User Management</h2>
                    <div class="filter-group">
                        <select id="roleFilter" onchange="loadUsers()">
                            <option value="">All Roles</option>
                            <option value="patient">Patients</option>
                            <option value="doctor">Doctors</option>
                            <option value="pharmacist">Pharmacists</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <table><thead><tr>
                        <th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Actions</th>
                    </tr></thead>
                    <tbody id="usersTableBody"></tbody></table>
                </div>
            </div>
        </div>

        <div id="appointments" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-calendar-check"></i> Appointments</h2>
                    <select id="appointmentStatusFilter" onchange="loadAppointments()">
                        <option value="">All</option>
                        <option value="scheduled">Scheduled</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
                <div class="table-container">
                    <table><thead><tr>
                        <th>ID</th><th>Patient</th><th>Doctor</th><th>Date</th><th>Status</th><th>Actions</th>
                    </tr></thead>
                    <tbody id="appointmentsTableBody"></tbody></table>
                </div>
            </div>
        </div>

        <div id="pharmacy" class="tab-content">
            <div class="stats-grid" id="pharmacyStats"></div>
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-prescription-bottle"></i> Prescriptions</h2>
                </div>
                <div class="table-container">
                    <table><thead><tr>
                        <th>ID</th><th>Patient</th><th>Status</th><th>Priority</th><th>Created</th>
                    </tr></thead>
                    <tbody id="prescriptionsTableBody"></tbody></table>
                </div>
            </div>
        </div>

        <div id="alerts" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> Emergency Alerts</h2>
                </div>
                <div class="table-container">
                    <table><thead><tr>
                        <th>ID</th><th>Patient</th><th>Condition</th><th>Severity</th><th>Status</th><th>Actions</th>
                    </tr></thead>
                    <tbody id="alertsTableBody"></tbody></table>
                </div>
            </div>
        </div>

        <div id="analytics" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-pie"></i> Patient Analytics</h2>
                    <div class="filter-group">
                        <input type="text" id="patientIdInput" placeholder="Patient ID">
                        <button class="btn btn-primary" onclick="loadPatientAnalytics()">Search</button>
                    </div>
                </div>
                <div id="patientAnalyticsContent"></div>
            </div>
        </div>
    </div>

    <div id="reassignModal" class="modal">
        <div class="modal-content">
            <h3>Reassign Appointment</h3>
            <input type="text" id="newDoctorName" placeholder="Doctor name">
            <button class="btn btn-primary" onclick="confirmReassign()">Confirm</button>
            <button class="btn" onclick="closeModal('reassignModal')">Cancel</button>
        </div>
    </div>

    <div id="forwardAlertModal" class="modal">
        <div class="modal-content">
            <h3>Forward to Hospital</h3>
            <input type="text" id="hospitalName" placeholder="Hospital name">
            <button class="btn btn-danger" onclick="confirmForwardAlert()">Forward</button>
            <button class="btn" onclick="closeModal('forwardAlertModal')">Cancel</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>
</html>
